# 概念
时间序列数据库 (TSDB) 是一种数据库管理系统，经过优化以存储、处理和分析时间序列数据。
> 时间序列数据是一系列数据点，表示一段时间内测量值或事件的变化。每个数据点总是带有时间戳，数据点序列按时间戳索引或列出。工业设备、智能设备、IT 监控系统和股票市场交易中的传感器生成的数据都是时间序列数据的例子。
> [概念](https://tdengine.com/tsdb/what-is-a-time-series-database/)


![采集表](https://img-blog.csdnimg.cn/dfaef50f608b4f0188128d2dd858527d.png)
- 采集量(Metric)：需要采集的数据(字段)，例如：智能电表的电流、电压、相位等
- 标签(Label/Tag)：采集设备的静态属性，例如：设备型号、颜色、设备的所在地等
- 数据采集点(Data Collection Point)：一个数据采集点可以采集一个或者或多个采集量，**但这些采集量都是同一时刻采集的，具有相同的时间戳**。
	- 对于复杂的设备，往往有多个数据采集点。例如：比如对于一台汽车，有数据采集点专门采集 GPS 位置，有数据采集点专门采集发动机状态，有数据采集点专门采集车内的环境，这样一台汽车就有三个数据采集点。
- 表(Table)：用户需要先创建库，然后创建表，之后才能插入或查询数据。
	- TDengine 采取**一个数据采集点一张表**的策略，要求对每个数据采集点单独建表（比如有一千万个智能电表，就需创建一千万张表，上述表格中的 d1001，d1002，d1003，d1004 都需单独建表）
	- **采用一个数据采集点一张表的方式，能最大程度的保证单个数据采集点的插入和查询的性能是最优的。**
- 超级表(STable)：超级表是指某一特定类型的数据采集点的集合。
	- **表用来代表一个具体的数据采集点，超级表用来代表一组相同类型的数据采集点集合**。
	- 超级表只定义一个模板，自身不存储任何数据或标签信息。
	- 不能向一个超级表写入数据，只能将数据写入子表中。
- 子表(Subtable)：当为某个具体数据采集点创建表时，用户可以使用超级表的定义做模板，同时指定该具体采集点（表）的具体标签值来创建该表。**通过超级表创建的表称之为子表**。
	- 针对超级表的查询，TDengine 将把所有子表中的数据视为一个整体数据集进行处理，会先把满足标签过滤条件的表从超级表中找出来，然后再扫描这些表的时序数据，进行聚合操作，这样需要扫描的数据集会大幅减少，从而显著提高查询的性能。
- 库（Database）
	- 一个库里，可以有一到多个超级表，但一个超级表只属于一个库。一个超级表所拥有的子表全部存在一个库里。



开发功能
- 连续查询
- 数据订阅
- cache

一般来说，只要物理量是一个数据采集点同时采集的，这些量就可以作为不同列放在同一张超级表里。
还有一种极限设计，单列模型，每个采集的物理量都是单独建表，因此每种类型的物理量都单独建立一张超级表。
子表跟普通表的不同在于静态标签。**子表有静态标签，普通表没有静态标签。**

可以将超级表所属的子表进行聚合查询
- 查找加利福尼亚州所有智能电表采集的电压平均值，并按照 location 分组。
- 查找 groupId 为 2 的所有智能电表过去 24 小时的记录条数，电流的最大值