- 滑动窗口：如果数据段一个一个发送导致效率比较低，尤其是数据往返时间长时，于是就出现了“滑动窗口”将多个字段一起发送，节省了等待时间。
	如果在传输过程中部分ACK丢了可以通过后续ACK进行确认；
	如果是数据包丢了，接收端会一直向发送端发送ACK（比如1001，表示0~1000已经收到了，该下一段数据了）提醒，当发送端连续收到3个这样的ACK时会重新发送这部分数据，当服务器端收到了想要的数据后，会直接跳到发送端最后一次发送的数据接着响应下次应答，这种机制被称为“快重传”。
- 流量控制：TCP根据接收端的处理能力来决定发送端的发送速度。
- 拥塞控制：如果在不清楚网络状态下开始就使用滑动窗口进行高效发送数据时，会引发不必要的问题，为此TCP引入“慢启动机制”,先发少量数据，摸清当前的网络拥塞状况后再决定以多大的速度进行数据传输。
- 延迟应答：如果发送数据量比较大，接收数据的主机立刻返回ACK应答，这时返回的窗口比较小，这种情况下接收端的处理能力远远没有达到极限，这时就需要接收端等一会儿再进行应答，延迟时间一般小于超时重传的时间，约为200ms。
- 捎带应答：在很多情况下客户端和服务器端是发一收一的，那么此时ACK就可以连同服务器回应的数据一块发送。
------

大白话：网络编程就是通过代码的方式来控制不同进程之间的数据交换。

## 服务端:
创建一个 DatagramSocket 对象,创建的同时关联一个端口号
读取请求 并解析
根据请求计算响应
把响应写回到客户端
打印日志
## 客户端：
创建一个 DatagramSocket 对象,创建的同时指定服务器的ip和端口号
读取输入的数据
构造请求 并 发送给服务器
从服务器读取响应
把数据显示给用户


# 网络编程基本用法
## 服务器
```markdown
1. 创建 `ServerSocket` 关联上一个端口号
2. 调用 `ServerSocket` 的 `accept` 方法
	1. 目的是 建立连接
	2. 会返回一个 `Socket` 实例,称为 `clientSocket`
3. 使用`clientSocket`的 `getInputStream` 和 `getOutputStream` 得到字节流对象,进行读写和写入
	1. 读取请求 并 解析
	2. 根据请求计算响应
	3. 把响应写回客户端
	4. 打印日志
4. 当客户端断开连接之后,服务器就应该要及时的关闭` clientSocket`. (防止出现文件泄露的情况)
```
## 客户端
```markdown
1. 创建一个`Socket`对象.创建的同时指定服务器的 ip 和端口
2. 客户端就可以通过`Socket`对象的`getInputStream`和`getOutputStream`来和服务器进行通信
	1. 从键盘上,读取用户输入的内容
	2. 把这个读取的内容构造成请求,发送给服务端
	3. 从服务器读取响应并解析
	4. 把结构显示到界面上
```



# TCP请求
TCP的八大特性：

- 确认应答（ACK）机制: 在 TCP 中，当发送端的数据到达接收主机时，接收端主机会返回一个已收到消息的通知，并且每个ACK都有对应的确认序列号，意思是告诉发送者，我已经收到了哪些数据，下次你从哪里开始发。
- 超时重传：主机A发送数据给B后，可能因为网络拥堵等原因，数据无法到达主机B；如果主机A在一个特定的时间间隔没有收到B发来的确认应答，就会进行重发；
	重发时间都是0.5秒的整数倍。数据被重发之后若还是收不到确认应答，则进行再次发送，此时，等待确认应答的时间将会以2倍、4倍的指数函数延长。
- 连接管理（3次握手四次挥手）：在正常情况下，TCP要经过三次握手建立连接，四次挥手断开连接
**三次握手**如下图所示：
![[Pasted image 20220429161239.png]]
1）、建立连接时，客户端发送SYN包到服务器，并进入到SYN-SEND状态，等待服务器确认
2）、服务器收到SYN包，必须确认客户的SYN,同时自己也发送一个SYN包,即SYN+ACK包，此时服务器进入SYN-RECV状态
3）、客户端收到服务器的SYN+ACK包，向服务器发送确认报ACK,此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手，客户端与服务器开始传送数据。


四次挥手示意图：
![[Pasted image 20220429161313.png]]
1）.第一次挥手：客户端发送一个FIN，用来关闭客户端到服务端的数据传送，客户端进入FIN_WAIT_1状态。
2）.第二次挥手：服务端收到FIN后，发送一个ACK给客户端，客户端进入CLOSE_WAIT状态。
3）.第三次挥手：服务端发送一个FIN，用来关闭服务端到客户端的数据传送，服务端进入LAST_ACK状态。
4）.第四次挥手：客户端收到FIN后，客户端进入TIME_WAIT状态，接着发送一个ACK给服务端，服务端进入CLOSED状态，完成四次挥手。
==time-wait就是tcp释放连接的四次挥手后的主动关闭连接方的状态。==



## IP分片
IP分片是网络上传输IP报文的一种技术手段。IP协议在传输数据包时，将数据报文分为若干分片进行传输，并在目标系统中进行重组。  
不同的链路类型规定有不同最大长度的链路层数据帧，称为链路层MTU（最大传输单元）。常见以太网的MTU为1500，若IP协议在传输数据包时，IP报文长度大于转发接口的MTU，则将数据报文分为若干分片进行传输，分片报文到达接收方时，由接收方完成重组。

# 线程与进程的区别
- 进程：
	是并发执行的程序在执行过程中分配和管理资源的基本单位，是一个动态概念，竞争计算机系统资源的基本单位。
- 线程：
	是进程的一个执行单元，是进程内科调度实体。比进程更小的独立运行的基本单位。线程也被称为轻量级进程。
- 协程：
	是一种比线程更加轻量级的存在。一个线程也可以拥有多个协程。其执行过程更类似于子例程，或者说不带返回值的函数调用。